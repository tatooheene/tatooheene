---
title: "Discounting with tatooheene"
author: "The tatooheene team"
date: "`r Sys.Date()`"
output:
  rmarkdown::html_vignette:
    toc: true
    number_sections: false
vignette: >
  %\VignetteIndexEntry{Discounting with tatooheene}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE, comment = "#>", fig.width = 7, fig.height = 4, dpi = 120
)
library(tatooheene)
```

## What this vignette covers

-   What the **discounting** is and where it lives in `tatooheene::df_fp`.
-   The formula and meaning of the annuity factor and the annual depreciation and interest charge.
-   How to call `discount_value()` and `discount_stream()`and how to interpret there outputs.

## Background

Costs and health outcomes that are expected to occur in the future are generally values less than those that occur in the present, and so it is recommended that they be discounted in economic analyses. This is typically done by presenting the costs and health outcomes as a stream of values over time, applying a discounting factor to each value, and then aggregating them to obtain the ‘present value’ of each stream.

The discount factor is increasing over time, based on an underlying fixed discount rate. In the Netherlands, we use a discount rate of 1.5% for health effects and 3% for costs.

*Text adapted from Dutch costing manual and Discount Rate [online]. (2016). York; York Health Economics Consortium; 2016. <https://yhec.co.uk/glossary/discount-rate/>.*

## Formulas

The most common method is to calculate a net present value based on constant discounting.

When taking costs as an example, the present value of costs ($C$) from the current year ($t=0$) up to and including year $n$ under a constant discounting model is:

$$
C \;=\; \sum_{t=0}^{n} \frac{K_t}{(1+i)^{t}}
$$

where $K_t$ denotes the costs in year $t$ and $i$ is the constant discount rate.\
No discounting is applied at $t=0$.

Please note that the net present value for costs, $C$, could also be the net present value of an health effect, e.g. QALYs.

## (Optional) R example

\`\`\`{r} \# Define annual costs K_t for t = 0..n and a constant discount rate i K \<- c(1000, 900, 800, 700, 600) \# example costs for t = 0..4 i \<- 0.03 \# 3% discount rate t \<- seq_along(K) - 1 \# t = 0..n

# Present value using the formula: C = sum\_{t=0}\^n K_t / (1 + i)\^t

C \<- sum( K / (1 + i)\^t )

C
